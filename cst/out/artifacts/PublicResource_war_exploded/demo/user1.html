<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- bootstrap & fontawesome -->
    <!--<link rel="stylesheet" href="../assets/css/bootstrap.min.css" />-->
    <link rel="stylesheet" href="../assets/font-awesome/4.2.0/css/font-awesome.min.css" />

    <!-- page specific plugin styles -->
    <link rel="stylesheet" href="../assets/css/jquery-ui.min.css" />
    <link rel="stylesheet" href="../assets/css/datepicker.min.css" />
    <link rel="stylesheet" href="../assets/css/ui.jqgrid.min.css" />
    <!-- text fonts -->
    <link rel="stylesheet" href="../assets/fonts/fonts.googleapis.com.css" />

    <!-- ace styles -->
    <!--<link rel="stylesheet" href="../assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />-->
    <link rel="stylesheet" href="../assets/css/datepicker.css " />

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
    <![endif]-->

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../assets/css/ace-ie.min.css" />
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->
    <script src="../assets/js/ace-extra.min.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
    <script src="../assets/js/html5shiv.min.js"></script>
    <script src="../assets/js/respond.min.js"></script>
    <![endif]-->
    <!--[if !IE]> -->
    <script src="../assets/js/jquery.2.1.1.min.js"></script>

    <!-- <![endif]-->

    <!--[if IE]>
    <script src="../assets/js/jquery.1.11.1.min.js"></script>
    <![endif]-->

    <!--[if !IE]> -->
    <script type="text/javascript">
        window.jQuery
        || document.write("<script src='../assets/js/jquery.min.js'>"
                + "<"+"/script>");
    </script>

    <!-- <![endif]-->

    <!--[if IE]>
    <script type="text/javascript">
        window.jQuery || document.write("<script src='../assets/js/jquery1x.min.js'>"+"<"+"/script>");
    </script>
    <![endif]-->
    <script type="text/javascript">
        if ('ontouchstart' in document.documentElement)
            document
                    .write("<script src='../assets/js/jquery.mobile.custom.min.js'>"
                            + "<"+"/script>");
    </script>
    <script src="../assets/js/bootstrap.min.js"></script>
    <!-- page specific plugin scripts -->

    <script src="../assets/js/ace.min.js"></script>
    <script src="../assets/js/jquery.jqGrid.min.js"></script>
    <script src="../assets/js/grid.locale-cn.js"></script>
    <script src="../assets/js/ace-elements.min.js"></script>
    <script src="../assets/js/bootstrap-datepicker.min.js"></script>
    <script src="../assets/js/bootbox.min.js"></script>
    <script type="text/javascript" src="../js/commonJs/common.js"></script>
    <!--  script type="text/javascript" src="../js/jquery.blockUI.js"></script-->
    <script type="text/javascript" src="../js/commonJs/commonValidation.js"></script>
    <![endif]-->
    <style>
        .red {
            color: red;
            font-size: 10px;
        }

        .labelBorder {
            padding: 8px;
            border: 1px solid #96c2f1;
            background: #eff7ff;
            width: 157px
        }
    </style>

</head>

<body>
<div>


    <div>
        <table class="table" id="jqgrid_table">
        </table>
        <div id="common_jqgrid_pager"></div>
    </div>


</div>


<script>

//    var ui_maskUi = false;
//    var ui_doNow = false;
//    var ui_isSave = false;
//    var ui_gridPager = false;
//    var ui_nowRecord = {};
//    var ui_pageNumber = 1;
//    var ui_gridPageSize = 50;
//    var ui_allGridData = {
//        total: 0,
//        rows: []
//    };
//
//
//    var appCommon = $.C_getCommon("appCommon");
//    var commonUtils = $.C_getCommon("commonUtils");
//
//    /**
//     * 列表定义
//     */
//    var ui_grid_defined = {
//        title: "",
//        url: null,
//        queryParams: null,
//        singleSelect: true,
//        remoteSort: false,
//        pagination: true,
//        width: 1000,
//        height: 500,
//        autoRowHeight: false,
//        pageNumber: 1,
//        pageSize: 10,
//        loadMsg: '正在加载数据，请稍候......',
//        rownumbers: true,
//        sortName: 'uploadDate',
//        sortOrder: 'desc',
//
//        columns: [[{
//            field: 'id',
//            title: 'id',
//            checkbox: true
//        }, {
//            field: 'username',
//            title: '用户名',
//            align: 'center',
//            width: 100
//        }, {
//            field: 'gender',
//            title: '性别',
//            align: 'center',
//            width: 100
//        }, {
//            field: 'age',
//            title: '年龄',
//            align: 'center',
//            width: 100
//        }, {
//            field: 'role',
//            title: '角色',
//            width: 100
//        }
//        ]],
//        onClickRow: function (rindex, rdata) {
//            ui_doNow = "modi";
//            ui_isSave = true;
//            ui_nowRecord = rdata;
//            //openEdit();
//        }
//    };
//
//
    /**
     *jquery 页面初始化
     */
    $(document).ready(function () {
        //初始化表单
//        initGrids();
        doSearch();
    });
//
//
//    function initGrids() {
//        $('#ui_gridDataTable').datagrid(ui_grid_defined);
//        ui_gridPager = $('#ui_gridDataTable').datagrid('getPager');
//        ui_gridPager.pagination({
//            showPageList: true,
//            onBeforeRefresh: function (ui_pageNumber, pageSize) {
//                doSearch();
//                //$('#ui_gridDataTable').reload();
//            },
//            onSelectPage: function (ui_pageNumber, pageSize) {
//                $('#ui_gridDataTable').datagrid('loadData', appCommon.getPageData(ui_pageNumber, ui_gridPageSize, ui_allGridData));
//            },
//            onRefresh: function (ui_pageNumber, pageSize) {
//                initGrid();
//                $('#ui_gridDataTable').datagrid('loadData', appCommon.getPageData(ui_pageNumber, ui_gridPageSize, ui_allGridData));
//            },
//            onChangePageSize: function (pageSize) {
//                ui_gridPageSize = pageSize;
//            }
//        });
//        $('#ui_gridDataTable').datagrid("load");
//    }
//
//
//    function doSearch() {
//        //路径
////        var selectUrl_ = "/" + PROJECT_NAME + "/user/list.do";
//        var url = "/user/list.do"
//        //参数
//        var params = {};
//        ui_allGridData = appCommon.getPagingSearchDataWithAsync("ui_gridDataTable", url, params, ui_gridPageSize);
//    }
//
//    function addUser() {
//        $('#dialog_modal').removeAttr("hidden");
//        $('#dialog_modal').dialog({
//            title: '弹出框',
//            modal: true,
//            onOpen: function () {
//
//            }
//        });
//    }
//
//    function selectByGender() {
//
//        var gender = $("input[name='gender']:checked").val();
////        alert(gender);
//        var url = "/user/selectByGender.do";
//        //参数
//        var params = {
//            'gender': gender
//        };
//        ui_allGridData = appCommon.getPagingSearchDataWithAsync("ui_gridDataTable", url, params, ui_gridPageSize);
//    }
//
//
//
//    function doSubmit1() {
//        //ff1为table名
//        $('#ff1').form('submit', {
//            onSubmit: function () {
//                return $(this).form('validate');
//            },
//            success: function (data) {
//                //获取dialog_modal下的数据
//                var params = formToJsonstr('dialog_modal');
////                for (var i in params) {
////                    alert(params[i]);
////                }
//                var insertUrl_ = "/user/addUser.do";
//                $.ajax({
//                    url: insertUrl_,
//                    data: params,
//                    type: 'post',
//                    dataType: 'json',
//                    success: function (data) {
//
//                        $('#dialog_modal').dialog('close');
//                        doSearch();
//
//                    },
//                    error: function () {
//                        alert("异常");
//                    }
//                });
//            }
//        });
//
//    }

    function doSearch() {
        var url = "/user/list.do"
        //参数
        var params = {};
        ajaxFunction(
                url,
                params,
                function(result) {
                    if (result.success) {
                        $("#jqgrid_table").GridUnload();
                        $("#jqgrid_table").jqGrid(
                                {
                                    data : result.data,
                                    datatype : "local",
                                    height : 393,
                                    colModel : [
                                        {
                                            "name" : "id",
                                            "label" : "id"
                                        },
                                        {
                                            "name" : "username",
                                            "label" : "姓名"
                                        },
                                        {
                                            "name" : "gender",
                                            "label" : "性别"
                                        },
                                        {
                                            "name" : "age",
                                            "label" : "年龄"
                                        },
                                        {
                                            "name" : "role",
                                            "label" : "角色"
                                        },
                                        {
                                            "name" : "fnDiv",
                                            "label" : "功能",
                                            "formatter" : function(
                                                    value, options,
                                                    rowData) {
                                                return "<div style='margin-left: 8px;'>"
                                                        + "<div  class='ui-pg-div ui-inline-edit'  style='float: left; cursor: pointer;'  onclick='openUpdateWin("
                                                        + JSON
                                                                .stringify(rowData)
                                                        + ")'; ><span class='ui-icon ui-icon-pencil'></span></div>"
                                                        + "<div  class='ui-pg-div ui-inline-del' style='margin-left: 5px; float: left;'  onclick='delConfirm("
                                                        + rowData.id
                                                        + ")' data-original-title='Delete'><span class='ui-icon ui-icon-trash'></span></div></div>";
                                                ;
                                            }
                                        } ],
                                    viewrecords : true,
                                    rowNum : 10,
                                    rowList : [ 10, 20, 30 ],
                                    pager : "#common_jqgrid_pager",
                                    altRows : true,
                                    multiselect : false,
                                    multiboxonly : true,
                                    rownumbers : true,
                                    autowidth : true,
                                    loadComplete : function() {
                                        var table = this;
                                        setTimeout(function() {
                                            // styleCheckbox(table);
                                            // updateActionIcons(table);
                                            updatePagerIcons(table);
                                            // enableTooltips(table);
                                        }, 0);
                                    }
                                });
                    }

                });


    }




</script>
</body>
</html>